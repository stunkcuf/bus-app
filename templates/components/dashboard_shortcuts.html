{{define "dashboard-shortcuts"}}
<!-- Dashboard Shortcuts Component -->
<div class="dashboard-shortcuts" data-help="dashboard-shortcuts">
  <div class="shortcuts-header">
    <h3 class="shortcuts-title">
      <i class="bi bi-star-fill" aria-hidden="true"></i>
      Frequent Tasks
    </h3>
    <p class="shortcuts-description">Quick access to your most-used features</p>
  </div>
  
  {{if eq .UserRole "manager"}}
  <!-- Manager Shortcuts -->
  <div class="shortcuts-grid">
    <!-- Daily Operations -->
    <div class="shortcut-card card-primary">
      <div class="shortcut-icon">
        <i class="bi bi-calendar-check-fill" aria-hidden="true"></i>
      </div>
      <h4 class="shortcut-title">Daily Operations</h4>
      <div class="shortcut-actions">
        <a href="/assign-routes" class="btn btn-sm btn-primary">
          <i class="bi bi-diagram-3" aria-hidden="true"></i>
          Assign Routes
        </a>
        <a href="/view-mileage-reports" class="btn btn-sm btn-outline-primary">
          <i class="bi bi-speedometer2" aria-hidden="true"></i>
          View Mileage
        </a>
      </div>
    </div>
    
    <!-- Fleet Management -->
    <div class="shortcut-card card-primary">
      <div class="shortcut-icon">
        <i class="bi bi-bus-front-fill" aria-hidden="true"></i>
      </div>
      <h4 class="shortcut-title">Fleet Management</h4>
      <div class="shortcut-actions">
        <a href="/fleet" class="btn btn-sm btn-primary">
          <i class="bi bi-list-check" aria-hidden="true"></i>
          View Fleet
        </a>
        <button type="button" class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addBusModal">
          <i class="bi bi-plus-circle" aria-hidden="true"></i>
          Add Bus
        </button>
      </div>
    </div>
    
    <!-- Reports & Data -->
    <div class="shortcut-card card-primary">
      <div class="shortcut-icon">
        <i class="bi bi-file-earmark-text-fill" aria-hidden="true"></i>
      </div>
      <h4 class="shortcut-title">Reports & Data</h4>
      <div class="shortcut-actions">
        <a href="/import-mileage" class="btn btn-sm btn-primary">
          <i class="bi bi-upload" aria-hidden="true"></i>
          Import Data
        </a>
        <a href="/report-builder" class="btn btn-sm btn-outline-primary">
          <i class="bi bi-file-pdf" aria-hidden="true"></i>
          Generate Report
        </a>
      </div>
    </div>
    
    <!-- User Management -->
    <div class="shortcut-card card-primary">
      <div class="shortcut-icon">
        <i class="bi bi-people-fill" aria-hidden="true"></i>
      </div>
      <h4 class="shortcut-title">User Management</h4>
      <div class="shortcut-actions">
        <a href="/approve-users" class="btn btn-sm btn-primary">
          <i class="bi bi-person-check" aria-hidden="true"></i>
          Approve Users
        </a>
        <a href="/users" class="btn btn-sm btn-outline-primary">
          <i class="bi bi-person-gear" aria-hidden="true"></i>
          Manage Users
        </a>
      </div>
    </div>
  </div>
  {{else}}
  <!-- Driver Shortcuts -->
  <div class="shortcuts-grid">
    <!-- Daily Tasks -->
    <div class="shortcut-card card-primary">
      <div class="shortcut-icon">
        <i class="bi bi-journal-text" aria-hidden="true"></i>
      </div>
      <h4 class="shortcut-title">Daily Tasks</h4>
      <div class="shortcut-actions">
        <button type="button" class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#logTripModal">
          <i class="bi bi-plus-circle" aria-hidden="true"></i>
          Log Trip
        </button>
        <a href="#recent-logs" class="btn btn-sm btn-outline-primary">
          <i class="bi bi-clock-history" aria-hidden="true"></i>
          View Logs
        </a>
      </div>
    </div>
    
    <!-- Student Management -->
    <div class="shortcut-card card-primary">
      <div class="shortcut-icon">
        <i class="bi bi-people-fill" aria-hidden="true"></i>
      </div>
      <h4 class="shortcut-title">Students</h4>
      <div class="shortcut-actions">
        <a href="/students" class="btn btn-sm btn-primary">
          <i class="bi bi-list" aria-hidden="true"></i>
          View Roster
        </a>
        <button type="button" class="btn btn-sm btn-outline-primary" data-action="custom" data-onclick="takeAttendance()">
          <i class="bi bi-check2-square" aria-hidden="true"></i>
          Take Attendance
        </button>
      </div>
    </div>
    
    <!-- Vehicle Status -->
    <div class="shortcut-card card-primary">
      <div class="shortcut-icon">
        <i class="bi bi-bus-front" aria-hidden="true"></i>
      </div>
      <h4 class="shortcut-title">Vehicle</h4>
      <div class="shortcut-actions">
        <a href="/fleet" class="btn btn-sm btn-primary">
          <i class="bi bi-info-circle" aria-hidden="true"></i>
          Bus Info
        </a>
        <button type="button" class="btn btn-sm btn-outline-danger" data-action="custom" data-onclick="reportIssue()">
          <i class="bi bi-exclamation-triangle" aria-hidden="true"></i>
          Report Issue
        </button>
      </div>
    </div>
  </div>
  {{end}}
</div>



<script nonce="{{.CSPNonce}}">
// Placeholder functions for driver actions
function takeAttendance() {
  alert('Attendance feature coming soon!');
}

function reportIssue() {
  alert('Issue reporting feature coming soon!');
}

// Add help content for shortcuts
document.addEventListener('DOMContentLoaded', function() {
      // CSP-compliant event listeners
      document.querySelectorAll('[data-action]').forEach(element => {
        element.addEventListener('click', function(e) {
          e.preventDefault();
          const action = this.dataset.action;
          
          switch(action) {
            case 'update-status':
              updateStatus(this.dataset.id, this.dataset.type, this.dataset.value);
              break;
            case 'edit-bus':
              editBus(this.dataset.busId);
              break;
            case 'delete-bus':
              deleteBus(this.dataset.busId);
              break;
            case 'custom':
              // Evaluate the original onclick content (careful with this)
              try {
                eval(this.dataset.onclick);
              } catch (e) { /* Error handled silently */ }
              break;
          }
        });
      });

  if (window.helpSystem) {
    window.helpSystem.addHelpContent('dashboard-shortcuts', {
      title: 'Dashboard Shortcuts',
      content: 'These shortcuts provide quick access to frequently used tasks. Click any button to navigate directly to that feature.'
    });
  }
});
</script>
{{end}}