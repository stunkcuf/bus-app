{{define "error_prevention_scripts"}}
<!-- Error Prevention & Recovery Scripts -->
{{template "global_env" .}}
<script src="/static/logger.js"></script>
<script src="/static/confirmation_dialogs.js"></script>
<script src="/static/auto_save.js"></script>
<script src="/static/friendly_errors.js"></script>
<script src="/static/loading_indicators.js"></script>

<script nonce="{{.CSPNonce}}">
  // Initialize error prevention features
  document.addEventListener('DOMContentLoaded', function() {
    // Only log in development
    if (window.APP_ENV !== 'production') {
      console.log('Error prevention systems initialized');
    }
    
    // Enable auto-save on long forms
    const longForms = document.querySelectorAll('.wizard-steps form, .accessible-form');
    longForms.forEach(form => {
      if (form.querySelectorAll('input, textarea, select').length > 5) {
        form.setAttribute('data-autosave', 'true');
      }
    });
  });
</script>
{{end}}